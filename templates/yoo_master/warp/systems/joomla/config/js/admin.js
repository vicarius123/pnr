/* Copyright (C) YOOtheme GmbH, http://www.gnu.org/licenses/gpl.html GNU/GPL */

jQuery(function(a){var b=a("#config"),e=a("#profile"),f=Joomla.submitbutton,d=window.sessionStorage||{};a("#myTabTabs").on("click","[data-toggle]",function(){d._tab=a(this).attr("href")});setTimeout(function(){d._tab&&a("#myTabTabs [href='"+d._tab+"']").trigger("click")},1);Joomla.submitbutton=function(c){var b=a('form[name="adminForm"]');"style.save"==c?b.trigger("save",["save",c]):"style.save2copy"==c?b.trigger("save",["save-copy",c]):"style.apply"==c?b.trigger("save",["apply",c]):f(c)};a("#templatestyleOptions").length?
b.closest("#templatestyleOptions").before(b).remove():b.closest("#details").find("div:first").before(b).hide();setTimeout(function(){b.find(".chzn-container").each(function(){a(this).prev().show().end().remove()})},200);b.tabs();e.prependTo("#config li.Profiles").profiles('[data-profile="default"]');1200>a(window).width()&&a("div.tabs-box").addClass("small-screen");b.prev("ul.nav").append('<li class="version">Warp '+b.data("warpversion")+"</li>");var k=a("#config ul.verify").hide();a("#config a.verify-link").bind("click",
function(a){a.preventDefault();k.slideToggle()});var l=a("#config ul.systemcheck").hide();a("#config a.systemcheck-link").bind("click",function(a){a.preventDefault();l.slideToggle()});a('form[name="adminForm"]').bind("save",function(b,d,e){var g={},h=[];b=a(this);var j=a("#toolbar-"+d);j.addClass("saving");a("#config li.ignore > .field").find("input, select, textarea").each(function(){h.push(a(this).attr("name"))});a.each(b.serializeArray(),function(b,c){-1<a.inArray(c.name,h)||(g[c.name]=c.value)});
a.ajax({url:b.attr("action"),type:"post",data:a.extend(g,{option:"com_templates",tmpl:"warp-ajax"}),success:function(b){j.removeClass("saving");try{if(b=a.parseJSON(b),"success"!=b.message){alert("Save failed!");return}}catch(c){}f(e)}})})});
